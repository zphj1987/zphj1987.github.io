"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7592],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>u});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),c=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(o.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},b=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),b=c(n),u=r,g=b["".concat(o,".").concat(u)]||b[u]||p[u]||l;return n?a.createElement(g,s(s({ref:t},d),{},{components:n})):a.createElement(g,s({ref:t},d))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,s=new Array(l);s[0]=b;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var c=2;c<l;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},5940:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const l={},s="Linux\u4e0b\u4e09\u79cd\u914d\u7f6eiscsi\u7684\u65b9\u6cd5",i={unversionedId:"\u7cfb\u7edf\u670d\u52a1\u76f8\u5173/iscsi\u670d\u52a1\u76f8\u5173/Linux\u4e0b\u4e09\u79cd\u914d\u7f6eiscsi\u7684\u65b9\u6cd5",id:"\u7cfb\u7edf\u670d\u52a1\u76f8\u5173/iscsi\u670d\u52a1\u76f8\u5173/Linux\u4e0b\u4e09\u79cd\u914d\u7f6eiscsi\u7684\u65b9\u6cd5",title:"Linux\u4e0b\u4e09\u79cd\u914d\u7f6eiscsi\u7684\u65b9\u6cd5",description:"linux\u4e0b\u9762\u914d\u7f6eiscsi\u6709\u591a\u79cd\u65b9\u6cd5\uff0c\u7528\u6237\u6001\u7684\u6709tgt\uff0c\u5185\u6838\u6001\u7684\u6709scst\u548clio\uff0c\u5982\u679c\u53ea\u662f\u666e\u901a\u7684\u4f7f\u7528\u6765\u8bf4\uff0c\u6ca1\u6709\u592a\u5927\u7684\u533a\u522b\uff0c\u5bf9\u4e8e\u67d0\u4e9b\u7279\u6b8a\u7684\u573a\u666f\u5c31\u5b58\u5728\u533a\u522b\u4e86",source:"@site/docs/\u7cfb\u7edf\u670d\u52a1\u76f8\u5173/iscsi\u670d\u52a1\u76f8\u5173/Linux\u4e0b\u4e09\u79cd\u914d\u7f6eiscsi\u7684\u65b9\u6cd5.md",sourceDirName:"\u7cfb\u7edf\u670d\u52a1\u76f8\u5173/iscsi\u670d\u52a1\u76f8\u5173",slug:"/\u7cfb\u7edf\u670d\u52a1\u76f8\u5173/iscsi\u670d\u52a1\u76f8\u5173/Linux\u4e0b\u4e09\u79cd\u914d\u7f6eiscsi\u7684\u65b9\u6cd5",permalink:"/docs/\u7cfb\u7edf\u670d\u52a1\u76f8\u5173/iscsi\u670d\u52a1\u76f8\u5173/Linux\u4e0b\u4e09\u79cd\u914d\u7f6eiscsi\u7684\u65b9\u6cd5",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"opencloudos\u5bb9\u5668\u955c\u50cf\u4f18\u5316",permalink:"/docs/\u64cd\u4f5c\u7cfb\u7edf\u76f8\u5173/centos\u7cfb\u7edf\u76f8\u5173/opencloudos\u5bb9\u5668\u955c\u50cf\u4f18\u5316"},next:{title:"iscsi\u5ba2\u6237\u7aef\u5e38\u7528\u64cd\u4f5c",permalink:"/docs/\u7cfb\u7edf\u670d\u52a1\u76f8\u5173/iscsi\u670d\u52a1\u76f8\u5173/iscsi\u5ba2\u6237\u7aef\u5e38\u7528\u64cd\u4f5c"}},o={},c=[{value:"tgt\u7684\u914d\u7f6e",id:"tgt\u7684\u914d\u7f6e",level:2},{value:"\u5b89\u88c5\u6253\u597d\u7684\u5305",id:"\u5b89\u88c5\u6253\u597d\u7684\u5305",level:3},{value:"\u652f\u6301librbd\u7684\u914d\u7f6e\u65b9\u5f0f",id:"\u652f\u6301librbd\u7684\u914d\u7f6e\u65b9\u5f0f",level:3},{value:"\u652f\u6301krbd\u7684\u914d\u7f6e\u65b9\u5f0f",id:"\u652f\u6301krbd\u7684\u914d\u7f6e\u65b9\u5f0f",level:3},{value:"LIO\u914d\u7f6e",id:"lio\u914d\u7f6e",level:2},{value:"\u4f7f\u7528\u547d\u4ee4\u884c\u914d\u7f6e",id:"\u4f7f\u7528\u547d\u4ee4\u884c\u914d\u7f6e",level:3},{value:"scst\u7684\u914d\u7f6e",id:"scst\u7684\u914d\u7f6e",level:2}],d={toc:c};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"linux\u4e0b\u4e09\u79cd\u914d\u7f6eiscsi\u7684\u65b9\u6cd5"},"Linux\u4e0b\u4e09\u79cd\u914d\u7f6eiscsi\u7684\u65b9\u6cd5"),(0,r.kt)("p",null,"linux\u4e0b\u9762\u914d\u7f6eiscsi\u6709\u591a\u79cd\u65b9\u6cd5\uff0c\u7528\u6237\u6001\u7684\u6709tgt\uff0c\u5185\u6838\u6001\u7684\u6709scst\u548clio\uff0c\u5982\u679c\u53ea\u662f\u666e\u901a\u7684\u4f7f\u7528\u6765\u8bf4\uff0c\u6ca1\u6709\u592a\u5927\u7684\u533a\u522b\uff0c\u5bf9\u4e8e\u67d0\u4e9b\u7279\u6b8a\u7684\u573a\u666f\u5c31\u5b58\u5728\u533a\u522b\u4e86"),(0,r.kt)("p",null,"\u6bd4\u5982tgt\u4e0d\u652f\u6301pacemaker\u91cc\u9762\u7684 Persistent (SCSI-3) Reservations\uff0c\u800cscst\u652f\u6301\ntgt\u4e0d\u652f\u6301vmware\u7684vaai\u7684\u67d0\u4e9b\u5c5e\u6027\uff0c\u800clio\u652f\u6301\n\u6bd4\u5982scst\u8fd8\u652f\u6301srpt\u7684\u529f\u80fd\uff0c\u800ctgt\u4e5f\u4e0d\u652f\u6301"),(0,r.kt)("p",null,"\u6240\u4ee5\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u6765\u9009\u62e9\u670d\u52a1\uff0c\u603b\u4f53\u4e0a\u6765\u8bf4iscsi\u7b97\u662f\u4e00\u4e2a\u4e2d\u95f4\u7684\u7ec4\u4ef6\uff0c\u5e76\u4e0d\u5f71\u54cd\u6570\u636e\u672c\u8eab\uff0c\u53ea\u662f\u4e00\u4e2a\u5bf9\u5916\u7684\u670d\u52a1\uff0c\u6ee1\u8db3\u9700\u6c42\u5373\u53ef"),(0,r.kt)("h2",{id:"tgt\u7684\u914d\u7f6e"},"tgt\u7684\u914d\u7f6e"),(0,r.kt)("p",null,"\u56e0\u4e3atgt\u662f\u652f\u6301librbd\u7684\uff0c\u4e5f\u662f\u652f\u6301krbd\u7684\uff0c\u6240\u4ee5\u8fd9\u4e2a\u5730\u65b9\u5b58\u5728\u4e24\u79cd\u914d\u7f6e\uff0c\u9ed8\u8ba4\u7684tgt\u662f\u4e0d\u652f\u6301rbd\u7684\uff0c\u9700\u8981\u81ea\u5df1\u91cd\u65b0\u6253\u5305\u652f\u6301\u5f00\u542f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# tgtadm --lld iscsi --mode system --op show | grep rbd\n")),(0,r.kt)("p",null,"\u6253\u5305\u7684\u6587\u6863\u89c1\u8fd9\u91cc\uff1a",(0,r.kt)("a",{parentName:"p",href:"mweblib://16613240145984"},"\u6253\u5305\u4e00\u4e2a\u652f\u6301rbd\u7684tgt")),(0,r.kt)("h3",{id:"\u5b89\u88c5\u6253\u597d\u7684\u5305"},"\u5b89\u88c5\u6253\u597d\u7684\u5305"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# rpm -ivh scsi-target-utils-*\nPreparing...                          ################################# [100%]\nUpdating / installing...\n   1:scsi-target-utils-1.0.84-4.el7   ################################# [ 50%]\n   2:scsi-target-utils-rbd-1.0.84-4.el################################# [100%]\n")),(0,r.kt)("p",null,"\u68c0\u67e5librdb\u7684\u652f\u6301\u60c5\u51b5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# tgtadm --lld iscsi --mode system --op show | grep rbd\n    rbd (bsoflags sync:direct)\n")),(0,r.kt)("h3",{id:"\u652f\u6301librbd\u7684\u914d\u7f6e\u65b9\u5f0f"},"\u652f\u6301librbd\u7684\u914d\u7f6e\u65b9\u5f0f"),(0,r.kt)("p",null,"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# cat /etc/tgt/conf.d/sample.conf\n<target iqn.2022-01.com.example:server.target1>\n    bs-type rbd\n    backing-store rbd/testrbd\n</target>\n")),(0,r.kt)("p",null,"\u542f\u52a8\u670d\u52a1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# systemctl start tgtd\n")),(0,r.kt)("p",null,"\u67e5\u770b\u751f\u6210\u7684\u670d\u52a1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# tgt-admin -s\nTarget 1: iqn.2022-01.com.example:server.target1\n    System information:\n        Driver: iscsi\n        State: ready\n    I_T nexus information:\n    LUN information:\n        LUN: 0\n            Type: controller\n            SCSI ID: IET     00010000\n            SCSI SN: beaf10\n            Size: 0 MB, Block size: 1\n            Online: Yes\n            Removable media: No\n            Prevent removal: No\n            Readonly: No\n            SWP: No\n            Thin-provisioning: No\n            Backing store type: null\n            Backing store path: None\n            Backing store flags:\n        LUN: 1\n            Type: disk\n            SCSI ID: IET     00010001\n            SCSI SN: beaf11\n            Size: 32212 MB, Block size: 512\n            Online: Yes\n            Removable media: No\n            Prevent removal: No\n            Readonly: No\n            SWP: No\n            Thin-provisioning: No\n            Backing store type: rbd\n            Backing store path: rbd/testrbd\n            Backing store flags:\n    Account information:\n    ACL information:\n        ALL\n")),(0,r.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u8fd9\u91cc\u591a\u4e86\u4e2a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Backing store type: rbd\nBacking store path: rbd/testrbd\n")),(0,r.kt)("p",null,"\u5ba2\u6237\u7aef\u767b\u5f55\u540e\u67e5\u770b\u78c1\u76d8"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab101 ~]# parted -s /dev/sdc print\nError: /dev/sdc: unrecognised disk label\nModel: IET VIRTUAL-DISK (scsi)\nDisk /dev/sdc: 32.2GB\nSector size (logical/physical): 512B/4194304B\nPartition Table: unknown\nDisk Flags:\n")),(0,r.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u7269\u7406\u6247\u533a\u7684\u5927\u5c0f\u4e3a4194304B\uff0c\u8fd9\u4e2a\u5728\u5f88\u591a\u73af\u5883\uff0crac\uff0cvmware\u90fd\u53ef\u80fd\u4e0d\u8bc6\u522b\uff0c\u9700\u8981\u4fee\u6539\u6247\u533a\u7684\u5927\u5c0f\uff0c\u8fd9\u4e2a\u662f\u5728tgt\u7684\u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u63a7\u5236\u7684"),(0,r.kt)("p",null,"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# cat /etc/tgt/conf.d/sample.conf\n<target iqn.2022-01.com.example:server.target1>\n    bs-type rbd\n    backing-store rbd/testrbd\n    lbppbe 0\n</target>\n")),(0,r.kt)("p",null,"\u8fd9\u4e2albppbe 0\u5c31\u662f\u5173\u952e\u914d\u7f6e\uff0c\u8bbe\u7f6e\u4ee5\u540e\u5ba2\u6237\u7aef\u7684\u8fde\u63a5\u540e\u770b\u5230\u7684\u78c1\u76d8\u6247\u533a\u5c31\u662f512b\u7684\u4e86"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab101 ~]# parted -s /dev/sdc print\nError: /dev/sdc: unrecognised disk label\nModel: IET VIRTUAL-DISK (scsi)\nDisk /dev/sdc: 32.2GB\nSector size (logical/physical): 512B/512B\nPartition Table: unknown\nDisk Flags:\n")),(0,r.kt)("h3",{id:"\u652f\u6301krbd\u7684\u914d\u7f6e\u65b9\u5f0f"},"\u652f\u6301krbd\u7684\u914d\u7f6e\u65b9\u5f0f"),(0,r.kt)("p",null,"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"<target iqn.2022-01.com.example:server.target1>\n    backing-store /dev/rbd/rbd/testrbd\n</target>\n")),(0,r.kt)("p",null,"\u542f\u52a8\u670d\u52a1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# systemctl start tgtd\n")),(0,r.kt)("p",null,"\u67e5\u770b\u751f\u6210\u7684\u670d\u52a1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# tgt-admin -s\nTarget 1: iqn.2022-01.com.example:server.target1\n    System information:\n        Driver: iscsi\n        State: ready\n    I_T nexus information:\n    LUN information:\n        LUN: 0\n            Type: controller\n            SCSI ID: IET     00010000\n            SCSI SN: beaf10\n            Size: 0 MB, Block size: 1\n            Online: Yes\n            Removable media: No\n            Prevent removal: No\n            Readonly: No\n            SWP: No\n            Thin-provisioning: No\n            Backing store type: null\n            Backing store path: None\n            Backing store flags:\n        LUN: 1\n            Type: disk\n            SCSI ID: IET     00010001\n            SCSI SN: beaf11\n            Size: 32212 MB, Block size: 512\n            Online: Yes\n            Removable media: No\n            Prevent removal: No\n            Readonly: No\n            SWP: No\n            Thin-provisioning: No\n            Backing store type: rdwr\n            Backing store path: /dev/rbd/rbd/testrbd\n            Backing store flags:\n    Account information:\n    ACL information:\n        ALL\n")),(0,r.kt)("p",null,"\u8fd9\u4e2a\u5730\u65b9\u6ce8\u610f\u4e0b\u770b\u4e0b\u5ba2\u6237\u7aef\u7684\u6620\u5c04\u7684\u76d8\u7684\u6247\u533a\u5927\u5c0f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab101 ~]# parted -s /dev/sdc print\nError: /dev/sdc: unrecognised disk label\nModel: IET VIRTUAL-DISK (scsi)\nDisk /dev/sdc: 32.2GB\nSector size (logical/physical): 512B/512B\nPartition Table: unknown\nDisk Flags:\n")),(0,r.kt)("h2",{id:"lio\u914d\u7f6e"},"LIO\u914d\u7f6e"),(0,r.kt)("h3",{id:"\u4f7f\u7528\u547d\u4ee4\u884c\u914d\u7f6e"},"\u4f7f\u7528\u547d\u4ee4\u884c\u914d\u7f6e"),(0,r.kt)("p",null,"\u521b\u5efa\u4e00\u4e2ablock\u8bbe\u5907"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# targetcli /backstores/block/ create disk01 /dev/rbd/rbd/testrbd\nCreated block storage object disk01 using /dev/rbd/rbd/testrbd.\n")),(0,r.kt)("p",null,"\u67e5\u770b\u5f53\u524d\u914d\u7f6e"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# targetcli ls /\no- / ............................................................ [...]\n  o- backstores ................................................. [...]\n  | o- block ..................................... [Storage Objects: 1]\n  | | o- disk01  [/dev/rbd/rbd/testrbd (30.0GiB) write-thru deactivated]\n  | |   o- alua ...................................... [ALUA Groups: 1]\n  | |     o- default_tg_pt_gp .......... [ALUA state: Active/optimized]\n  | o- fileio .................................... [Storage Objects: 0]\n  | o- pscsi ..................................... [Storage Objects: 0]\n  | o- ramdisk ................................... [Storage Objects: 0]\n  o- iscsi ............................................... [Targets: 0]\n  o- loopback ............................................ [Targets: 0]\n")),(0,r.kt)("p",null,"\u521b\u5efa\u4e00\u4e2atarget"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# targetcli /iscsi/ create iqn.2022-01.org.linux-iscsi.lab103.x8664:sn.192f7d06da4a\nCreated target iqn.2022-01.org.linux-iscsi.lab103.x8664:sn.192f7d06da4a.\nCreated TPG 1.\nGlobal pref auto_add_default_portal=true\nCreated default portal listening on all IPs (0.0.0.0), port 3260.\n")),(0,r.kt)("p",null,"\u521b\u5efa\u4e00\u4e2alun"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# targetcli  /iscsi/iqn.2022-01.org.linux-iscsi.lab103.x8664:sn.192f7d06da4a/tpg1/luns create /backstores/block/disk01\nCreated LUN 0.\n")),(0,r.kt)("p",null,"\u8bbe\u7f6etarget\u7684\u5c5e\u6027"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# targetcli  /iscsi/iqn.2022-01.org.linux-iscsi.lab103.x8664:sn.192f7d06da4a/tpg1 set attribute authentication=0 demo_mode_write_protect=0 generate_node_acls=1 cache_dynamic_acls=1\n")),(0,r.kt)("p",null,"\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# targetcli /  saveconfig\nLast 10 configs saved in /etc/target/backup/.\nConfiguration saved to /etc/target/saveconfig.json\n")),(0,r.kt)("p",null,"\u542f\u52a8target"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# systemctl start target\n")),(0,r.kt)("h2",{id:"scst\u7684\u914d\u7f6e"},"scst\u7684\u914d\u7f6e"),(0,r.kt)("p",null,"\u914d\u7f6efileio\u6a21\u5f0f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# cat /etc/scst.conf\nHANDLER vdisk_fileio {\n    DEVICE disk01 {\n        filename /dev/rbd/rbd/testrbd\n        nv_cache 1\n    }\n}\n\nTARGET_DRIVER iscsi {\n    enabled 1\n    TARGET iqn.2022-05.net.vlnb:tgt {\n        LUN 0 disk01\n        enabled 1\n    }\n}\n")),(0,r.kt)("p",null,"\u914d\u7f6eblockio\u6a21\u5f0f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# cat /etc/scst.conf\nHANDLER vdisk_blockio {\n    DEVICE disk01 {\n        filename /dev/rbd/rbd/testrbd\n        nv_cache 1\n    }\n}\n\nTARGET_DRIVER iscsi {\n    enabled 1\n    TARGET iqn.2022-05.net.vlnb:tgt {\n        LUN 0 disk01\n        enabled 1\n    }\n}\n")),(0,r.kt)("p",null,"\u542f\u52a8\u670d\u52a1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"[root@lab103 ~]# systemctl start scst\n")))}p.isMDXComponent=!0}}]);