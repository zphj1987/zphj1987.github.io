"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[128],{3905:(e,t,n)=>{n.d(t,{Zo:()=>i,kt:()=>l});var a=n(7294);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},d=Object.keys(e);for(a=0;a<d.length;a++)n=d[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(a=0;a<d.length;a++)n=d[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},i=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},b=a.forwardRef((function(e,t){var n=e.components,c=e.mdxType,d=e.originalType,p=e.parentName,i=o(e,["components","mdxType","originalType","parentName"]),b=s(n),l=c,h=b["".concat(p,".").concat(l)]||b[l]||f[l]||d;return n?a.createElement(h,r(r({ref:t},i),{},{components:n})):a.createElement(h,r({ref:t},i))}));function l(e,t){var n=arguments,c=t&&t.mdxType;if("string"==typeof e||c){var d=n.length,r=new Array(d);r[0]=b;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:c,r[1]=o;for(var s=2;s<d;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}b.displayName="MDXCreateElement"},4625:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>f,frontMatter:()=>d,metadata:()=>o,toc:()=>s});var a=n(7462),c=(n(7294),n(3905));const d={},r="\u83b7\u53d6\u4e00\u6bb5\u65f6\u95f4\u5185ceph osd\u7684\u78c1\u76d8\u8bfb\u5199\u60c5\u51b5",o={unversionedId:"\u5b58\u50a8\u76f8\u5173\u6280\u672f/ceph\u76f8\u5173\u6280\u672f/ceph\u7edf\u8ba1\u4fe1\u606f/\u83b7\u53d6\u4e00\u6bb5\u65f6\u95f4\u5185ceph osd\u7684\u78c1\u76d8\u8bfb\u5199\u60c5\u51b5",id:"\u5b58\u50a8\u76f8\u5173\u6280\u672f/ceph\u76f8\u5173\u6280\u672f/ceph\u7edf\u8ba1\u4fe1\u606f/\u83b7\u53d6\u4e00\u6bb5\u65f6\u95f4\u5185ceph osd\u7684\u78c1\u76d8\u8bfb\u5199\u60c5\u51b5",title:"\u83b7\u53d6\u4e00\u6bb5\u65f6\u95f4\u5185ceph osd\u7684\u78c1\u76d8\u8bfb\u5199\u60c5\u51b5",description:"\u9700\u6c42",source:"@site/docs/\u5b58\u50a8\u76f8\u5173\u6280\u672f/ceph\u76f8\u5173\u6280\u672f/ceph\u7edf\u8ba1\u4fe1\u606f/\u83b7\u53d6\u4e00\u6bb5\u65f6\u95f4\u5185ceph osd\u7684\u78c1\u76d8\u8bfb\u5199\u60c5\u51b5.md",sourceDirName:"\u5b58\u50a8\u76f8\u5173\u6280\u672f/ceph\u76f8\u5173\u6280\u672f/ceph\u7edf\u8ba1\u4fe1\u606f",slug:"/\u5b58\u50a8\u76f8\u5173\u6280\u672f/ceph\u76f8\u5173\u6280\u672f/ceph\u7edf\u8ba1\u4fe1\u606f/\u83b7\u53d6\u4e00\u6bb5\u65f6\u95f4\u5185ceph osd\u7684\u78c1\u76d8\u8bfb\u5199\u60c5\u51b5",permalink:"/docs/\u5b58\u50a8\u76f8\u5173\u6280\u672f/ceph\u76f8\u5173\u6280\u672f/ceph\u7edf\u8ba1\u4fe1\u606f/\u83b7\u53d6\u4e00\u6bb5\u65f6\u95f4\u5185ceph osd\u7684\u78c1\u76d8\u8bfb\u5199\u60c5\u51b5",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"ceph\u7684\u8bbe\u5907\u5173\u7cfb\u83b7\u53d6",permalink:"/docs/\u5b58\u50a8\u76f8\u5173\u6280\u672f/ceph\u76f8\u5173\u6280\u672f/ceph\u7edf\u8ba1\u4fe1\u606f/ceph\u7684\u8bbe\u5907\u5173\u7cfb\u83b7\u53d6"},next:{title:"ceph\u7f16\u8bd1\u6253\u5305\u4e2d\u65ad\u7ee7\u7eed",permalink:"/docs/\u5b58\u50a8\u76f8\u5173\u6280\u672f/ceph\u76f8\u5173\u6280\u672f/\u7f16\u8bd1\u6253\u5305\u76f8\u5173/ceph\u7f16\u8bd1\u6253\u5305\u4e2d\u65ad\u7ee7\u7eed"}},p={},s=[{value:"\u9700\u6c42",id:"\u9700\u6c42",level:2},{value:"\u4fe1\u606f\u83b7\u53d6",id:"\u4fe1\u606f\u83b7\u53d6",level:2},{value:"\u5b9e\u73b0",id:"\u5b9e\u73b0",level:2},{value:"\u6548\u679c",id:"\u6548\u679c",level:2}],i={toc:s};function f(e){let{components:t,...n}=e;return(0,c.kt)("wrapper",(0,a.Z)({},i,n,{components:t,mdxType:"MDXLayout"}),(0,c.kt)("h1",{id:"\u83b7\u53d6\u4e00\u6bb5\u65f6\u95f4\u5185ceph-osd\u7684\u78c1\u76d8\u8bfb\u5199\u60c5\u51b5"},"\u83b7\u53d6\u4e00\u6bb5\u65f6\u95f4\u5185ceph osd\u7684\u78c1\u76d8\u8bfb\u5199\u60c5\u51b5"),(0,c.kt)("h2",{id:"\u9700\u6c42"},"\u9700\u6c42"),(0,c.kt)("p",null,"\u8fd9\u4e2a\u662f\u7edf\u8ba1\u4e00\u6bb5\u65f6\u95f4\u5185ceph\u7684\u78c1\u76d8\u4e0a\u7684\u6570\u636e\u7684\u8bfb\u53d6\u548c\u5199\u5165\u7684\u6570\u636e\u91cf\u4ee5\u53ca\u82b1\u8d39\u7684\u65f6\u95f4"),(0,c.kt)("h2",{id:"\u4fe1\u606f\u83b7\u53d6"},"\u4fe1\u606f\u83b7\u53d6"),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-bash"},"[root@node235 ceph]# cat /sys/block/sdj/sdj1/stat\n    1575        0   335680     1687   145461       46  5334992   269147        0    54562   270566\n\n\u7b2c\u4e00\u4e2a\u57df \u8bfb\u53d6\u78c1\u76d8\u7684\u6b21\u6570\n\u7b2c\u4e8c\u4e2a\u662f \u5408\u5e76\u8bfb\u53d6\u7684\u6b21\u6570\n\u7b2c\u4e09\u4e2a\u57df \u8bfb\u6247\u533a\u7684\u6b21\u6570\n\u7b2c\u56db\u4e2a\u57df \u8bfb\u82b1\u8d39\u7684\u6beb\u79d2\u6570\n\u7b2c\u4e94\u4e2a\u57df \u5199\u5b8c\u6210\u6b21\u6570\n\u7b2c\u516d\u4e2a\u57df \u5408\u5e76\u5199\u6b21\u6570\n\u7b2c\u4e03\u4e2a\u57df \u5199\u6247\u533a\u7684\u6b21\u6570\n\u7b2c\u516b\u4e2a\u57df \u5199\u64cd\u4f5c\u82b1\u7684\u6beb\u79d2\u6570\n\u7b2c\u4e5d\u4e2a\u57df \u6b63\u5728\u5904\u7406\u7684io\u6570\u76ee\n\u7b2c\u5341\u4e2a\u57df \u8f93\u5165\u8f93\u51fa\u82b1\u7684\u603b\u6beb\u79d2\u6570\n\u7b2c\u5341\u4e00\u4e2a\u57df \u8f93\u5165\u8f93\u51fa\u82b1\u7684\u52a0\u6743\u6beb\u79d2\u6570\n")),(0,c.kt)("p",null,"\u6765\u6e90\uff1a"),(0,c.kt)("blockquote",null,(0,c.kt)("p",{parentName:"blockquote"},(0,c.kt)("a",{parentName:"p",href:"https://www.kernel.org/doc/html/v5.3/admin-guide/iostats.html"},"https://www.kernel.org/doc/html/v5.3/admin-guide/iostats.html"))),(0,c.kt)("h2",{id:"\u5b9e\u73b0"},"\u5b9e\u73b0"),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-bash"},"[root@node235 ceph]# cat getread.sh \n[root@node235 ceph]# cat getread.sh \n#! /bin/bash\nIFS=$'\\n\\n' \nfor osd in `ceph osd dump|grep osd|grep -v req|grep -v max|awk '{print $1,$19}'`\ndo \nosdnum=`echo  $osd|awk '{print $1}'`\nosdid=`echo  $osd|awk '{print $2}'`\nvgname=`lvdisplay |grep $osdid -A 1|tail  -n 1|awk '{print $3}'`\npvname=`pvdisplay |grep $vgname -B1|head -n 1|awk '{print $3}'`\n\ndiskname=`echo ${pvname%?}|cut -d / -f 3`\npvpath=`echo $pvname|cut -d / -f 3`\nreadsec=`cat /sys/block/$diskname/$pvpath/stat|awk '{print $3}'`\nreadmb=`expr $readsec \\* 512 / 1024 / 1024`\nreadtime=`cat /sys/block/$diskname/$pvpath/stat|awk '{print $4}'`\nreadtimesec=`expr $readtime / 1000`\nwritesec=`cat /sys/block/$diskname/$pvpath/stat|awk '{print $7}'`\nwritemb=`expr $writesec \\* 512 / 1024 / 1024`\nwritetime=`cat /sys/block/$diskname/$pvpath/stat|awk '{print $8}'`\nwritetimesec=`expr $writetime / 1000`\necho  $osdnum  $osdid  $vgname  $pvname  $readmb $readtimesec $writemb $writetimesec\n\ndone\n\n\n")),(0,c.kt)("h2",{id:"\u6548\u679c"},"\u6548\u679c"),(0,c.kt)("pre",null,(0,c.kt)("code",{parentName:"pre",className:"language-bash"},"[root@node235 ceph]# bash getread.sh \nosd.0 f6203dc0-7007-42da-bb1b-6ac54a9f9f74 ceph-36597766-1058-490f-bb46-ae4fd8eb141a /dev/sdd1 10063 86 13 0\nosd.1 c4b7f141-51a0-4b97-80b5-e9681025f7db ceph-f786b5a2-82f4-4086-b0d1-7f5e6787c421 /dev/sdc1 320 1 1606 174\nosd.2 24f68dd2-5a4f-4b41-8775-ae0211a06e5d ceph-07e22954-93d0-4bb1-9ce3-59485eab1673 /dev/sdi1 249 1 1604 155\nosd.3 deed6a2e-456f-40be-bade-07a4b358e2c1 ceph-f1f76e61-d0d6-447b-ac26-a9a2d7fd2d5d /dev/sds1 320 1 1606 169\nosd.4 f325a546-a6c7-4610-9916-31062ec6decc ceph-5c1357a5-036a-4f2e-83a8-4463e4349264 /dev/sdf1 320 2 1606 162\nosd.5 3790748f-f212-4d46-8b72-b6c9ba007019 ceph-9874a1ac-9163-4936-a2f9-976260f19d6d /dev/sdr1 321 1 1606 165\nosd.6 50140786-a01d-47c4-bca4-68ad7730863c ceph-0e4af92c-9766-467c-a7d5-db4435aadd6b /dev/sdk1 243 1 1604 149\nosd.7 5e56f9a0-7637-477a-95cf-b995987e6270 ceph-c0de6d4b-1907-49d7-aa9b-194ccbc72465 /dev/sdb1 321 2 1606 172\nosd.8 261ea9d8-581b-42ec-9493-1df7b74394b7 ceph-54946fde-edc4-4cf1-b59a-375d69bfff7a /dev/sdm1 237 1 1604 149\nosd.9 a4212438-e463-48f3-be58-7668df524c35 ceph-805428c1-077c-4092-80f5-95b0ac9f5ea5 /dev/sdh1 321 2 1606 172\nosd.10 ebfb8caf-a3e6-4715-b992-9ca560104c4e ceph-7e9809bf-c4c0-4686-84f6-4e8639f02dac /dev/sde1 322 2 1606 157\nosd.11 7c310379-994d-4faa-9724-1ec1bf6d85bd ceph-3b602d70-99d0-496e-8b96-c34b36d973bc /dev/sdo1 231 1 1604 151\nosd.12 cd608ef9-d491-4d09-8f7f-ac82e026b321 ceph-2a8d2275-d307-41ab-9125-17dbe610559a /dev/sdg1 322 2 1606 172\nosd.14 782cb3ed-9fcd-40aa-9db3-1cd7babda3fb ceph-9117f02b-c6a0-43a0-ac3f-c0af75381c5f /dev/sdq1 323 1 1606 166\nosd.15 77275ae5-d953-44fc-8196-d6b31e005fb3 ceph-c30f789a-3213-49ce-8831-2296e5697119 /dev/sdp1 322 1 1606 168\nosd.16 1a325633-209d-4c3a-a89a-c90d6c26688f ceph-397d3bce-9f1a-4e33-9bd0-48f52804a7f6 /dev/sdj1 324 2 2629 264\n")),(0,c.kt)("p",null,"\u6700\u53f3\u8fb9\u7684\u56db\u4e2a\u6570\u5b57\u662f\uff1a\n\u8bfb\u53d6\u7684MB  \u8bfb\u53d6\u7684\u79d2  \u5199\u5165\u7684MB  \u5199\u5165\u7684\u79d2"))}f.isMDXComponent=!0}}]);