<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-rk3588 docs-doc-id-硬件篇/AX210蓝牙识别可用rock5b内核">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">AX210蓝牙识别可用rock5b内核 | WuHan Mo Mo </title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.zphj1987.com/rk3588/硬件篇/AX210蓝牙识别可用rock5b内核"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-rk3588-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-rk3588-current"><meta data-rh="true" property="og:title" content="AX210蓝牙识别可用rock5b内核 | WuHan Mo Mo "><meta data-rh="true" name="description" content="背景"><meta data-rh="true" property="og:description" content="背景"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.zphj1987.com/rk3588/硬件篇/AX210蓝牙识别可用rock5b内核"><link data-rh="true" rel="alternate" href="https://www.zphj1987.com/rk3588/硬件篇/AX210蓝牙识别可用rock5b内核" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.zphj1987.com/rk3588/硬件篇/AX210蓝牙识别可用rock5b内核" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="WuHan Mo Mo  RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="WuHan Mo Mo  Atom Feed"><link rel="stylesheet" href="/assets/css/styles.85f3fd95.css">
<link rel="preload" href="/assets/js/runtime~main.ad503f86.js" as="script">
<link rel="preload" href="/assets/js/main.11275154.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="MoMo Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="MoMo Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">MoMo</b></a><a class="navbar__item navbar__link" href="/docs/intro">文档</a><a class="navbar__item navbar__link" href="/blog">博客</a><a class="navbar__item navbar__link" href="/rk3588/intro">rk3588</a></div><div class="navbar__items navbar__items--right"><a href="https://blog.csdn.net/zphj1987" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">csdn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current,docs-rk3588-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rk3588/intro">文档目录</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rk3588/基础篇/rockpi5b硬件组成">基础篇</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/rk3588/硬件篇/AX210蓝牙识别可用rock5b内核">硬件篇</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rk3588/硬件篇/AX210蓝牙识别可用rock5b内核">AX210蓝牙识别可用rock5b内核</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rk3588/硬件篇/使用串口连接查看启动信息">使用串口连接查看启动信息</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rk3588/进阶篇/内核相关/自定义rock5b内核">进阶篇</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">硬件篇</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">AX210蓝牙识别可用rock5b内核</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>AX210蓝牙识别可用rock5b内核</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="背景">背景<a class="hash-link" href="#背景" title="Direct link to heading">​</a></h2><p>AX210是intel的一个wifi和蓝牙一起的模块，这个小的模块一般是在笔记本里面的，rock5b上面的接口是支持这个模块的
AX210因为比较新，所以wifi的支持在5.10内核是没有问题的，但蓝牙在这个上面就无法启动了，报下面的错误，这个错误在网上看到很多包括X86下面的内核上面也出现了，基本上就是驱动相关的问题，然后kernel官方主线内核的5.10.155也没有合入相关的支持，没有做低版本内核的backport（其实改动量也不大，就是新增的），rock5b的5.10内核也自然就不支持这个蓝牙了</p><p>开始的时候打算整个bluetooth目录替换，发现编译不过去，内核后来的版本可能还改了其它东西，最后还是只把相关的改动弄到5.10上面来，改动还好不是很大，这个地方设计的比较好的就是只是新增了相关的函数，所以也基本上对其它的蓝牙功能没影响的</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="错误信息">错误信息<a class="hash-link" href="#错误信息" title="Direct link to heading">​</a></h2><p>可以看到这个错误，网上关键字很多，就是wifi可用，蓝牙不可用</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">46.734253</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Reading Intel version information failed </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">-22</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">46.734305</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Intel Read version failed </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">-22</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="设备相关信息">设备相关信息<a class="hash-link" href="#设备相关信息" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="3EA36E43838FFF77E315DE65AD2BD8FD" src="/assets/images/3EA36E43838FFF77E315DE65AD2BD8FD-2228509325ace98de3cc9cacda3a4ce8.jpg" width="4032" height="3024" class="img_ev3q"></p><p><img loading="lazy" alt="QQ20221125-0" src="/assets/images/QQ20221125-0-ba30f1748ca072d9855d86e27d5e3599.jpg" width="4032" height="3024" class="img_ev3q"></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@rock-5b:/home/rock/Pictures</span><span class="token comment" style="color:#999988;font-style:italic"># lsusb</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bus 006 Device 001: ID 1d6b:0003 Linux Foundation </span><span class="token number" style="color:#36acaa">3.0</span><span class="token plain"> root hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bus 005 Device 001: ID 1d6b:0002 Linux Foundation </span><span class="token number" style="color:#36acaa">2.0</span><span class="token plain"> root hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bus 008 Device 001: ID 1d6b:0003 Linux Foundation </span><span class="token number" style="color:#36acaa">3.0</span><span class="token plain"> root hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bus 007 Device 001: ID 1d6b:0002 Linux Foundation </span><span class="token number" style="color:#36acaa">2.0</span><span class="token plain"> root hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bus 004 Device 001: ID 1d6b:0001 Linux Foundation </span><span class="token number" style="color:#36acaa">1.1</span><span class="token plain"> root hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bus 002 Device 001: ID 1d6b:0002 Linux Foundation </span><span class="token number" style="color:#36acaa">2.0</span><span class="token plain"> root hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bus 003 Device 001: ID 1d6b:0001 Linux Foundation </span><span class="token number" style="color:#36acaa">1.1</span><span class="token plain"> root hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bus 001 Device 004: ID </span><span class="token number" style="color:#36acaa">8087</span><span class="token plain">:0032 Intel Corp.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bus 001 Device 002: ID 1a40:0101 Terminus Technology Inc. Hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Bus 001 Device 001: ID 1d6b:0002 Linux Foundation </span><span class="token number" style="color:#36acaa">2.0</span><span class="token plain"> root hub</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上面的Bus 001 Device 004: ID 8087:0032 Intel Corp.这个就是AX210的设备，这个8087:0032是固定的设备id</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@rock-5b:/home/rock/Pictures</span><span class="token comment" style="color:#999988;font-style:italic"># lspci</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0002:20:00.0 PCI bridge: Fuzhou Rockchip Electronics Co., Ltd Device </span><span class="token number" style="color:#36acaa">3588</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rev 01</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0002:21:00.0 Network controller: Intel Corporation Device </span><span class="token number" style="color:#36acaa">2725</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rev 1a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0004:40:00.0 PCI bridge: Fuzhou Rockchip Electronics Co., Ltd Device </span><span class="token number" style="color:#36acaa">3588</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rev 01</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0004:41:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8125 </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">.5GbE Controller </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rev 04</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上面的Network controller: Intel Corporation Device 2725这个也是AX210的设备id</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ax210蓝牙使用情况">AX210蓝牙使用情况<a class="hash-link" href="#ax210蓝牙使用情况" title="Direct link to heading">​</a></h2><p>windows上面的蓝牙用过，感觉功能比较简单，linux下没用过，下面就记录下一些功能，我的系统安装的是官方提供的ubuntu</p><blockquote><p><a href="https://github.com/radxa/debos-radxa/releases/download/20221031-1045/rock-5b-ubuntu-focal-server-arm64-20221031-1328-gpt.img.xz" target="_blank" rel="noopener noreferrer">https://github.com/radxa/debos-radxa/releases/download/20221031-1045/rock-5b-ubuntu-focal-server-arm64-20221031-1328-gpt.img.xz</a></p></blockquote><p>系统安装完成后就安装下桌面</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> ubuntu-desktop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后重启，进入图形界面</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="内核替换">内核替换<a class="hash-link" href="#内核替换" title="Direct link to heading">​</a></h3><p>替换上已经打好蓝牙补丁的内核</p><p>内核下载地址:
<a target="_blank" href="/assets/files/linux-kernel-rock5b-ax210-bluetooth.tar-eeb21e18829ce21dae482cffa641fcd2.gz">linux-kernel-rock5b-ax210-bluetooth.tar.gz</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装内核">安装内核<a class="hash-link" href="#安装内核" title="Direct link to heading">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@rock-5b:~/kernel/packages</span><span class="token comment" style="color:#999988;font-style:italic"># dpkg -i linux-image-5.10.66-blue-10-rockchip-g311cf1c0d_5.10.66-blue-10-rockchip_arm64.deb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="增加sfi文件和ddc文件">增加sfi文件和ddc文件<a class="hash-link" href="#增加sfi文件和ddc文件" title="Direct link to heading">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://anduin.linuxfromscratch.org/sources/linux-firmware/intel/ibt-0041-0041.sfi  -O /lib/firmware/intel/ibt-0041-0041.sfi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://anduin.linuxfromscratch.org/sources/linux-firmware/intel/ibt-0041-0041.ddc -O /lib/firmware/intel/ibt-0041-0041.ddc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意上面是大O(是哦不是零不是小哦)，不确定就检查一下文件内容</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@rock-5b:~</span><span class="token comment" style="color:#999988;font-style:italic"># ll /lib/firmware/intel/ibt-0041-0041.sfi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rw-r--r-- </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> root root </span><span class="token number" style="color:#36acaa">690128</span><span class="token plain"> Nov </span><span class="token number" style="color:#36acaa">19</span><span class="token plain"> 04:46 /lib/firmware/intel/ibt-0041-0041.sfi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>检查启动项</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@rock-5b:~/kernel/packages</span><span class="token comment" style="color:#999988;font-style:italic"># cat /boot/extlinux/extlinux.conf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#timeout 10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#menu title select kernel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">label kernel-5.10.66-blue-10-rockchip-g311cf1c0d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kernel /vmlinuz-5.10.66-blue-10-rockchip-g311cf1c0d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    initrd /initrd.img-5.10.66-blue-10-rockchip-g311cf1c0d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    devicetreedir /dtbs/5.10.66-blue-10-rockchip-g311cf1c0d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fdtoverlays  /dtbs/5.10.66-blue-10-rockchip-g311cf1c0d/rockchip/overlay/rk3588-uart7-m2.dtbo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    append   </span><span class="token assign-left variable" style="color:#36acaa">root</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">UUID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">67ad0e7b-3914-48d6-97c2-c48e5e0e405b </span><span class="token assign-left variable" style="color:#36acaa">earlycon</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">uart8250,mmio32,0xfeb50000 </span><span class="token assign-left variable" style="color:#36acaa">console</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ttyFIQ0 </span><span class="token assign-left variable" style="color:#36acaa">console</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tty1 </span><span class="token assign-left variable" style="color:#36acaa">consoleblank</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">loglevel</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">panic</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> rootwait rw </span><span class="token assign-left variable" style="color:#36acaa">init</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/sbin/init </span><span class="token assign-left variable" style="color:#36acaa">rootfstype</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ext4 </span><span class="token assign-left variable" style="color:#36acaa">cgroup_enable</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">cpuset </span><span class="token assign-left variable" style="color:#36acaa">cgroup_memory</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">cgroup_enable</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">memory </span><span class="token assign-left variable" style="color:#36acaa">swapaccount</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> irqchip.gicv3_pseudo_nmi</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">switolb</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">coherent_pool</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">2M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">label kernel-5.10.66-27-rockchip-gea60d388902d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kernel /vmlinuz-5.10.66-27-rockchip-gea60d388902d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    initrd /initrd.img-5.10.66-27-rockchip-gea60d388902d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    devicetreedir /dtbs/5.10.66-27-rockchip-gea60d388902d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fdtoverlays  /dtbs/5.10.66-27-rockchip-gea60d388902d/rockchip/overlay/rk3588-uart7-m2.dtbo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    append   </span><span class="token assign-left variable" style="color:#36acaa">root</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">UUID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">67ad0e7b-3914-48d6-97c2-c48e5e0e405b </span><span class="token assign-left variable" style="color:#36acaa">earlycon</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">uart8250,mmio32,0xfeb50000 </span><span class="token assign-left variable" style="color:#36acaa">console</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ttyFIQ0 </span><span class="token assign-left variable" style="color:#36acaa">console</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">tty1 </span><span class="token assign-left variable" style="color:#36acaa">consoleblank</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">loglevel</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">panic</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> rootwait rw </span><span class="token assign-left variable" style="color:#36acaa">init</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/sbin/init </span><span class="token assign-left variable" style="color:#36acaa">rootfstype</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">ext4 </span><span class="token assign-left variable" style="color:#36acaa">cgroup_enable</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">cpuset </span><span class="token assign-left variable" style="color:#36acaa">cgroup_memory</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">cgroup_enable</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">memory </span><span class="token assign-left variable" style="color:#36acaa">swapaccount</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> irqchip.gicv3_pseudo_nmi</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">switolb</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">coherent_pool</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">2M</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意上面修改的blue的标签的应该排在上面的，重启板卡</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="正常启动日志">正常启动日志<a class="hash-link" href="#正常启动日志" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">11.990430</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> usb </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">-1.3: new full-speed USB device number </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> using ehci-platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.135296</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> squashfs: version </span><span class="token number" style="color:#36acaa">4.0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2009</span><span class="token plain">/01/31</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Phillip Lougher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.209438</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> usb </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">-1.3: New USB device found, </span><span class="token assign-left variable" style="color:#36acaa">idVendor</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">8087</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">idProduct</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0032, </span><span class="token assign-left variable" style="color:#36acaa">bcdDevice</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.209450</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> usb </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">-1.3: New USB device strings: </span><span class="token assign-left variable" style="color:#36acaa">Mfr</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">Product</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">SerialNumber</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.213051</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Device revision is </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.213057</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Secure boot is enabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.213059</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: OTP lock is enabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.213061</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: API lock is enabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.213063</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Debug lock is disabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.213065</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Minimum firmware build </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> week </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2014</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.213068</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Bootloader timestamp </span><span class="token number" style="color:#36acaa">2019.40</span><span class="token plain"> buildtype </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> build </span><span class="token number" style="color:#36acaa">38</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.213804</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Found device firmware: intel/ibt-0041-0041.sfi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.787396</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> ttyFIQ ttyFIQ0: tty_port_close_start: tty-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> port count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">12.881301</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> fuse: init </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">API version </span><span class="token number" style="color:#36acaa">7.32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">13.094139</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> FAT-fs </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mmcblk0p1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: utf8 is not a recommended IO charset </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> FAT filesystems, filesystem will be </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> sensitive</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">13.830192</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Waiting </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> firmware download to complete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">13.831152</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Firmware loaded </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1582218</span><span class="token plain"> usecs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">13.831226</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Waiting </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> device to boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">13.857113</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Device booted </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">25334</span><span class="token plain"> usecs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">13.858975</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Found Intel DDC parameters: intel/ibt-0041-0041.ddc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">13.861222</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Applying Intel DDC parameters completed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">13.865219</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Firmware timestamp </span><span class="token number" style="color:#36acaa">2022.39</span><span class="token plain"> buildtype </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> build </span><span class="token number" style="color:#36acaa">52159</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">17.172415</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> r8125: enP4p65s0: </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">17.172554</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> IPv6: ADDRCONF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NETDEV_CHANGE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: enP4p65s0: </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> becomes ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">20.887172</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> dwhdmi-rockchip fdea0000.hdmi: use tmds mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">21.100098</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> dwhdmi-rockchip fdea0000.hdmi: use tmds mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">37.005172</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> vcc3v3_pcie30: disabling</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以看到正常的加载了，上面的信息就是蓝牙加载这部分的内容</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="蓝牙使用体验">蓝牙使用体验<a class="hash-link" href="#蓝牙使用体验" title="Direct link to heading">​</a></h2><p>AX210如果没有装天线，蓝牙需要在10cm左右的距离才能识别的比较好，远了有问题，这个后面装了天线再验证信号情况</p><p><img loading="lazy" alt="desktop-bluetoothicon.png" src="/assets/images/desktop-bluetoothicon-ddd7fed500da7ac5bedcc997e8c4add0.png" width="1920" height="1080" class="img_ev3q">
可以看到右上角的蓝牙图标可以点了，不是完全灰掉的，没打驱动无法使用</p><p><img loading="lazy" src="/assets/images/蓝牙助手-e72ed026eefffddd37158ad16f7fab13.png" width="1920" height="1080" class="img_ev3q">
通过蓝牙助手进行蓝牙的配对，这个地方配对需要两边都确认，可以在系统设置里面配对</p><p><img loading="lazy" src="/assets/images/扫描蓝牙设备-229087c2957b5a9f1546671c3298e873.png" width="1920" height="1080" class="img_ev3q">
识别到的设备</p><p><img loading="lazy" src="/assets/images/配对成功-ac591af6ce37115d0d5fe82a29cc4a5a.png" width="1920" height="1080" class="img_ev3q">
可以看到配对成功，显示的是已经连接</p><p><img loading="lazy" src="/assets/images/设备列表查看-f803d471584e9afa1cabe29a613612dc.png" width="1920" height="1080" class="img_ev3q">
设备列表里面还有其它的蓝牙设备</p><p><img loading="lazy" src="/assets/images/进行配对-e63aa33b4eda51c62eb82e413af080fb.png" width="1920" height="1080" class="img_ev3q">
进行配对的操作</p><p><img loading="lazy" src="/assets/images/设置可以被扫描-228669c0b603cf0dbf7e168e443af841.png" width="1920" height="1080" class="img_ev3q">
设置蓝牙设备可以被扫描</p><p><img loading="lazy" src="/assets/images/系统设置里面进行连接-329082d4a6d535e446ce707c9e387ca0.png" width="1920" height="1080" class="img_ev3q">
再系统设置里面进行连接，双机设备可以传文件给设备</p><p><img loading="lazy" src="/assets/images/信号查看-e7026982d071f13a85758103ab71b3b9.png" width="1920" height="1080" class="img_ev3q">
可以看到信号
<img loading="lazy" src="/assets/images/从rock5b往手机传文件-0da89475ca18cfe93b71c0f739427a95.png" width="1920" height="1080" class="img_ev3q">
文件正在传输，没有问题</p><p><img loading="lazy" src="/assets/images/蓝牙设备信息-185c1c4c5ec892254295abf19e21a768.png" width="1920" height="1080" class="img_ev3q">
hci查询蓝牙信息
<img loading="lazy" src="/assets/images/手机通过蓝牙投放音频给rock5b-14a0fe573e5e9a5b5bcdda92ddbd3aff.png" width="1920" height="1080" class="img_ev3q">
手机连rock5b以后，在手机那边播放音乐，在rock5b上面可以识别到，并且能够听到声音，作为一个音频设备处理的</p><p><img loading="lazy" src="/assets/images/wifi的识别-0eb0d7e91b72dc54cbd28dbcdcb410bb.png" width="1920" height="1080" class="img_ev3q">
wifi识别也是没有问题的</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="蓝牙当前确认测试可以的功能">蓝牙当前确认测试可以的功能<a class="hash-link" href="#蓝牙当前确认测试可以的功能" title="Direct link to heading">​</a></h2><ul><li>1、蓝牙连接（正常）</li><li>2、rock5b给手机发送文件(正常)</li><li>3、手机通过蓝牙发送音频给rock5b,rock5b播放声音（正常）</li><li>4、鼠标连接蓝牙到rock5b(未测试，设备在路上)</li><li>5、蓝牙连接蓝牙耳机（不正常，不确定信号问题，还是耳机兼容性问题，本身ubuntu通过蓝牙播放需要设置，后续确认）</li></ul><p>上面可以看到，rock5b到设备的可以发送，设备到rock5b也是能发送的，两边都是通路的</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="相关资源">相关资源<a class="hash-link" href="#相关资源" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="patch文件">patch文件<a class="hash-link" href="#patch文件" title="Direct link to heading">​</a></h3><p><a target="_blank" href="/assets/files/AX210-bluetooth-44481fbe127629d168e8091ea7d36259.patch">AX210-bluetooth.patch</a>
patch文件是以rock5b官方的内核做的patch文件,就是下面这个分支的</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone -b stable-5.10-rock5 https://github.com/radxa/kernel.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在内核代码的上一层目录里面下载上面的patch文件，然后打上patch</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@ubuntu:~/rk3588-sdk/</span><span class="token comment" style="color:#999988;font-style:italic"># wget 【上面的链接】</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@ubuntu:~/rk3588-sdk/</span><span class="token comment" style="color:#999988;font-style:italic"># cd kernel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root@ubuntu:~/rk3588-sdk/kernel</span><span class="token comment" style="color:#999988;font-style:italic"># patch -p1 &lt; ../AX210-bluetooth.patch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patching </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> drivers/bluetooth/btintel.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patching </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> drivers/bluetooth/btintel.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">patching </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> drivers/bluetooth/btusb.c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后编译打包即可</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="或者直接下载我的分支">或者直接下载我的分支<a class="hash-link" href="#或者直接下载我的分支" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@ubuntu:~/rk3588-sdk/</span><span class="token comment" style="color:#999988;font-style:italic"># git clone -b stable-5.10-rock5   --single-branch --depth 1   https://github.com/zphj1987/kernel.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个分支已经打好了蓝牙的补丁的</p><p>如果考虑跟官方的版本的话，就用上面的打patch的文件的方式</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="或者用我打好的内核deb文件如下">或者用我打好的内核deb文件如下<a class="hash-link" href="#或者用我打好的内核deb文件如下" title="Direct link to heading">​</a></h3><p><a target="_blank" href="/assets/files/linux-kernel-rock5b-ax210-bluetooth.tar-eeb21e18829ce21dae482cffa641fcd2.gz">linux-kernel-rock5b-ax210-bluetooth.tar.gz</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="排错指南">排错指南<a class="hash-link" href="#排错指南" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="错误reading-intel-version-information-failed">错误：Reading Intel version information failed<a class="hash-link" href="#错误reading-intel-version-information-failed" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">45.961353</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Intel reset sent to retry FW download</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">46.183435</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> usb </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">-1.3: USB disconnect, device number </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">46.512737</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> usb </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">-1.3: new full-speed USB device number </span><span class="token number" style="color:#36acaa">51</span><span class="token plain"> using ehci-platform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">46.729278</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> usb </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">-1.3: New USB device found, </span><span class="token assign-left variable" style="color:#36acaa">idVendor</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">8087</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">idProduct</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0032, </span><span class="token assign-left variable" style="color:#36acaa">bcdDevice</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">46.729313</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> usb </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">-1.3: New USB device strings: </span><span class="token assign-left variable" style="color:#36acaa">Mfr</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">Product</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">SerialNumber</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">46.734253</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Reading Intel version information failed </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">-22</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">46.734305</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Intel Read version failed </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">-22</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">46.734415</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Intel reset sent to retry FW download</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">46.950300</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> usb </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">-1.3: USB disconnect, device number </span><span class="token number" style="color:#36acaa">51</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>未安装打补丁的内核，安装即可</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="错误-direct-firmware-load-for-intelibt-0041-0041sfi-failed-with-error--2">错误： Direct firmware load for intel/ibt-0041-0041.sfi failed with error -2<a class="hash-link" href="#错误-direct-firmware-load-for-intelibt-0041-0041sfi-failed-with-error--2" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">9.790666</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Debug lock is disabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">9.790669</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Minimum firmware build </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> week </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2014</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">9.790672</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Bootloader timestamp </span><span class="token number" style="color:#36acaa">2019.40</span><span class="token plain"> buildtype </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> build </span><span class="token number" style="color:#36acaa">38</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">9.814394</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> bluetooth hci0: Direct firmware load </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> intel/ibt-0041-0041.sfi failed with error -2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">9.814410</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Failed to load Intel firmware </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">-2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">9.819751</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Intel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">R</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Wireless WiFi driver </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> Linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">9.829338</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> iwlwifi 0002:21:00.0: enabling device </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0000 -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> 0002</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">9.872571</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> iwlwifi 0002:21:00.0: api flags index </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> larger than supported by driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">    </span><span class="token number" style="color:#36acaa">9.872638</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> iwlwifi 0002:21:00.0: TLV_FW_FSEQ_VERSION: FSEQ Version: </span><span class="token number" style="color:#36acaa">93.8</span><span class="token plain">.63.28</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>未下载sfi文件，下载即可</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://anduin.linuxfromscratch.org/sources/linux-firmware/intel/ibt-0041-0041.sfi  -o /lib/firmware/intel/ibt-0041-0041.sfi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="错误bluetooth-hci0-failed-to-load-intel-ddc-file-intelibt-0041-0041ddc--2">错误：Bluetooth: hci0: Failed to load Intel DDC file intel/ibt-0041-0041.ddc (-2)<a class="hash-link" href="#错误bluetooth-hci0-failed-to-load-intel-ddc-file-intelibt-0041-0041ddc--2" title="Direct link to heading">​</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">14.499042</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Waiting </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> firmware download to complete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">14.499117</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Firmware loaded </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1556348</span><span class="token plain"> usecs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">14.499215</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Waiting </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> device to boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">14.525032</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Device booted </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">25277</span><span class="token plain"> usecs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">14.525162</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Failed to load Intel DDC </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> intel/ibt-0041-0041.ddc </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">-2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">14.529103</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Bluetooth: hci0: Firmware timestamp </span><span class="token number" style="color:#36acaa">2022.39</span><span class="token plain"> buildtype </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> build </span><span class="token number" style="color:#36acaa">52159</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">17.810272</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> r8125: enP4p65s0: </span><span class="token function" style="color:#d73a49">link</span><span class="token plain"> up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">17.810336</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> IPv6: ADDRCONF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NETDEV_CHANGE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: enP4p65s0:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>解决办法：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://anduin.linuxfromscratch.org/sources/linux-firmware/intel/ibt-0041-0041.ddc -O /lib/firmware/intel/ibt-0041-0041.ddc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/rk3588/基础篇/安装系统/ubuntu-server安装桌面"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ubuntu-server安装桌面</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rk3588/硬件篇/使用串口连接查看启动信息"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">使用串口连接查看启动信息</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#背景" class="table-of-contents__link toc-highlight">背景</a></li><li><a href="#错误信息" class="table-of-contents__link toc-highlight">错误信息</a></li><li><a href="#设备相关信息" class="table-of-contents__link toc-highlight">设备相关信息</a></li><li><a href="#ax210蓝牙使用情况" class="table-of-contents__link toc-highlight">AX210蓝牙使用情况</a><ul><li><a href="#内核替换" class="table-of-contents__link toc-highlight">内核替换</a></li><li><a href="#正常启动日志" class="table-of-contents__link toc-highlight">正常启动日志</a></li></ul></li><li><a href="#蓝牙使用体验" class="table-of-contents__link toc-highlight">蓝牙使用体验</a></li><li><a href="#蓝牙当前确认测试可以的功能" class="table-of-contents__link toc-highlight">蓝牙当前确认测试可以的功能</a></li><li><a href="#相关资源" class="table-of-contents__link toc-highlight">相关资源</a><ul><li><a href="#patch文件" class="table-of-contents__link toc-highlight">patch文件</a></li><li><a href="#或者直接下载我的分支" class="table-of-contents__link toc-highlight">或者直接下载我的分支</a></li><li><a href="#或者用我打好的内核deb文件如下" class="table-of-contents__link toc-highlight">或者用我打好的内核deb文件如下</a></li></ul></li><li><a href="#排错指南" class="table-of-contents__link toc-highlight">排错指南</a><ul><li><a href="#错误reading-intel-version-information-failed" class="table-of-contents__link toc-highlight">错误：Reading Intel version information failed</a></li><li><a href="#错误-direct-firmware-load-for-intelibt-0041-0041sfi-failed-with-error--2" class="table-of-contents__link toc-highlight">错误： Direct firmware load for intel/ibt-0041-0041.sfi failed with error -2</a></li></ul></li><li><a href="#错误bluetooth-hci0-failed-to-load-intel-ddc-file-intelibt-0041-0041ddc--2" class="table-of-contents__link toc-highlight">错误：Bluetooth: hci0: Failed to load Intel DDC file intel/ibt-0041-0041.ddc (-2)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ad503f86.js"></script>
<script src="/assets/js/main.11275154.js"></script>
</body>
</html>